
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />

<link rel="stylesheet" type="text/css" href="css/yxstyle.css" />
<link rel="stylesheet" type="text/css" href="js/thickbox.css" />
<link rel="stylesheet" type="text/css" href="js/jquery/style/Validator.css" />

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/thickbox.js"></script>
<script type="text/javascript" src="js/jquery/formValidator.js"
	charset="UTF-8"></script>

<script type="text/javascript" src="js/jquery/formValidatorRegex.js"
	charset="UTF-8"></script>
<script type="text/javascript" src="js/DatePicker/WdatePicker.js"></script>

<script type="text/javascript" src="js/common/businesspage.js"></script>
<script type="text/javascript"
	src="view/template/rdproject/task/js/rdtk_onekey_tab.js"></script>
	<script type="text/javascript" src="js/common/email.js"></script>

<script type="text/javascript" src="js/ext/ext-base.js"></script>
<script type="text/javascript" src="js/ext/ext-all.js"></script>
<script type="text/javascript" src="js/ext/common-ext.js"></script>
<link rel="stylesheet" type="text/css"
	href="js/ext/resources/css/ext-all.css" />
<script type="text/javascript" src="js/ext/ux/tree/MyTree.class.js"></script>
<script type="text/javascript"
	src="js/ext/ux/combox/ComboBoxTree.class.js"></script>
<link rel="stylesheet" type="text/css" href="js/ext/css/styles.css" />
<script type="text/javascript" src="js/ext/ux/grid/MyGrid.class.js"></script>
<script type="text/javascript"
	src="js/ext/ux/combox/MyGridComboBox.class.js"></script>
<script type="text/javascript"
	src="view/template/rdproject/task/js/tknode_sumbit_combotree.js"></script>
<!-- 附件上传开始 -->
<script type="text/javascript" src="swfupload/swfupload.js"></script>
<script type="text/javascript" src="swfupload/swfupload.queue.js"></script>
<script type="text/javascript" src="swfupload/fileprogress.js"></script>
<script type="text/javascript" src="swfupload/handlers.js"></script>
<link rel="stylesheet" type="text/css" href="swfupload/upload.css">
<script>
	var uploadfile;
	$(function() {
		uploadfile = createSWFUpload({
			"serviceType" : "oa_rd_task",//业务模块编码，一般取表名
			"serviceId":"{id}"
		});
	});
</script>
<script type="text/javascript">
		function changePlanDuration(sDayEl,eDayEl,el){
			$("#"+el).val(plusDateInfo(sDayEl,eDayEl));
		}

$(document).ready(function() {
	$('#selfGrade').val('good');
	$.formValidator.initConfig({
		formid : "form1",
		onerror : function(msg) {
		},
		onsuccess : function() {
			if (confirm("你输入成功,确定提交吗?")) {
				return true;
			} else {
				return false;
			}
		}
	});
	$("#auditName").formValidator({
		onshow : "请选择审核人",
		onfocus : "不可输入，请选择",
		oncorrect : "您选择的审核人有效"
	}).inputValidator({
		min : 1,
		onerror : "请选择审核人"
	});
})

</script>
<script>
	function mailTo(){
		$('#TO_NAME').val( $('#auditName').val() );
		$('#TO_ID').val( $('#auditId').val() );
	}
</script>
</head>
<body onload="mailTo();">
<table class="form_main_table">
	<tr>
		<td class="main_tr_header" colspan="4">基本信息</td>
	</tr>

	<tr>
		<td class="form_text_left">任务名称</td>
		<td class="form_text_right" colspan="3">{name}</td>
	</tr>

	<tr>
		<td class="form_text_left">所属项目</td>
		<td class="form_view_right">
		<input type="hidden" id="projectId" value="{projectId}"/>
		{projectName}</td>
		<td class="form_text_left">发布人</td>
		<td class="form_view_right">{publishName}</td>
	</tr>

	<tr>
		<td class="form_text_left">任务类型</td>
		<td class="form_text_right">{taskType}</td>
		<td class="form_text_left">优先级</td>
		<td class="form_text_right">{priority}</td>
	</tr>
	<tr>
		<td class="form_text_left">最近更新时间</td>
		<td class="form_view_right">{updateTime}</td>
		<td class="form_text_left">创建日期</td>
		<td class="form_view_right">{createTime}</td>
	</tr>
	<tr>
		<td class="form_text_left">所属计划</td>
		<td class="form_view_right">{planName}</td>
		<td class="form_text_left">里程碑</td>
		<td class="form_view_right"></td>
	</tr>

	<tr>
		<td class="form_text_left">完成率</td>
		<td class="form_view_right">{effortRate}</td>
		<td class="form_text_left">已投入工作量</td>
		<td class="form_view_right">{putWorkload}</td>
	</tr>
	<tr>
		<td class="form_text_left">责任人</td>
		<td class="form_view_right"  colspan="3">{chargeName}</td>
	</tr>

	<tr>
		<td class="form_text_left">参与人</td>
		<td class="form_view_right" colspan="3">{actUserNames}</td>

	</tr>

	<tr>
		<td class="form_text_left">任务描述</td>
		<td class="form_text_right" colspan="3">{remark}</td>
	</tr>
	<tr>
		<td class="form_text_left">验收标准</td>
		<td class="form_text_right" colspan="3"></td>
	</tr>
	<tr>
		<td class="main_tr_header" colspan="4">对比分析</td>
	</tr>
	<tr>
		<td class="form_text_left">计划开始日期</td>
		<td class="form_text_right">{planBeginDate}</td>
		<td class="form_text_left">计划完成日期</td>
		<td class="form_text_right">{planEndDate}</td>
	</tr>
	<tr>
		<td class="form_text_left">实际开始日期</td>
		<td class="form_view_right">{actBeginDate}</td>
		<td class="form_text_left">实际完成日期</td>
		<td class="form_view_right">{actEndDate}</td>
	</tr>
	<tr>
		<td class="form_text_left">偏差率</td>
		<td class="form_view_right">{warpRate}</td>
		<td class="form_text_left"> 变更次数</td>
		<td class="form_view_right"></td>
	</tr>
	<tr>
		<td class="form_text_left">估计工作量</td>
		<td class="form_text_right">{appraiseWorkload}</td>
		<td class="form_text_left">实际工作量</td>
		<td class="form_text_right"></td>
	</tr>
	<tr>
		<td class="form_text_left">计划工期</td>
		<td class="form_text_right">{planDuration}</td>
		<td class="form_text_left">实际工期</td>
		<td class="form_view_right">{realDuration}</td>
	</tr>
	<tr>
		<td class="form_text_left">备注</td>
		<td class="form_text_right" colspan="3"></td>
	</tr>
</table>
	<form action="?model=rdproject_task_tkover&action=addSubmitTkinfo" id="form1" method="POST" name="form1" >
<table class="form_main_table">
	<tr>
		<td class="main_tr_header" colspan="4">自我评价
			<input type="hidden" name="tkover[name]" value="{name}" id="name"/>
		</td>
	</tr>
	<tr>
		<td class="form_text_left">自评等级</td>
		<td class="form_text_right" colspan="3"><input type="hidden" name="tkover[taskId]" id="taskId" value="{id}"><select class="select" name="tkover[selfGrade]" id="selfGrade">{selfGrade}</select></td>

	</tr>
	<tr>
		<td class="form_text_left">审核人</td>
		<td class="form_text_right" colspan="3">
		   <input type="hidden" id="auditId" name="tkover[task][auditId]" value="{auditUserIds}">
		   <input type="text" class="txt" name="tkover[task][auditName]" id="auditName" value="{auditUserNames}" readOnly>
		    <input type="button" value="选 择" class="txt_btn_a" onclick="loadOrgWindow('auditId','auditName')" onblur="mailTo();">
		    <input type="button" value="清 空" class="txt_btn_a" onclick="clearOrgInfo('auditId','auditName')">
		    <span class='red'>[*]</span>
			<br/><div id="auditNameTip" class="dbcolumnTipTxt"></div>
		</td>
	</tr>
	<tr>
		<td class="form_text_left">自我描述</td>
		<td class="form_text_right" colspan="3"><textarea
			name="tkover[selfRemark]" class="txt_txtarea_font" id="selfRemark"></textarea></td>
	</tr>
	<tr>
		<td class="form_text_left">附件</td>
		<td class="form_text_right" colspan="3">
		<div class="upload">
		<div class="upload" id="fsUploadProgress"></div>
		<div class="upload"><span id="swfupload"></span> <input
			id="btnCancel" type="button" value="中止上传"
			onclick="cancelQueue(uploadfile);" disabled="disabled" /> <br />
		</div>
		<div id="uploadfileList" class="upload"></div>
		</div>
		<input class="txt" type="text" id="uploadfiletype" /> <input
			type="hidden" id="uploadfiletypeId" /></td>
	</tr>
	<tr>
   		<td class="form_text_left">是否发送邮件
       	</td>
   		<td colspan="3" class="form_text_right">
   			<input type="radio" name="tkover[email][issend]" value="y" checked="checked" onclick="checkEmailTA(this)"/>是
      		<input type="radio" name="tkover[email][issend]" value="n" onclick="checkEmailTA(this);" />否
		</td>
	</tr>
   	<tr id="maildiv">
   		<td class="form_text_left">邮件发送至
       	</td>
       	<td colspan="3" class="form_text_right">
    		<input type="hidden" name="tkover[email][TO_ID]" id="TO_ID" readonly="readonly"/>
		    <input type="text" class="txtlong" name="rdtask[email][TO_NAME]" id="TO_NAME" readonly="readonly"/>
		    <input type="button" class="txt_btn_a" value="选 择" onclick="loadOrgWindow2('TO_ID','TO_NAME')" title="选择"/>
		    <input type="button" class="txt_btn_a" value="清 空" onclick="clearOrgInfo('TO_ID','TO_NAME')" title="清空"/>
	    </td>
   	</tr>
	<tr>
		<td colspan="4">
			<input  type="submit" class="txt_btn_a"  value="确定">
			<input type="button" class="txt_btn_a" onclick="self.parent.tb_remove();" value="返回 "></td>
	</tr>
</table>
</form>

</body>
</html>

