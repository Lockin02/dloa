<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>销售合同</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<link rel="stylesheet" type="text/css" href="css/yxstyle.css" />
<link rel="stylesheet" type="text/css" href="js/jquery/style/Validator.css"/>
<link rel="stylesheet" type="text/css" href="js/jquery/style/yxmenu.css" media="screen" />
<link rel="stylesheet" type="text/css" href="js/jquery/style/yxmenu.theme.css" media="screen" />
<link rel="stylesheet" type="text/css" href="js/jquery/style/yxgrid.css" />
<script type="text/javascript" src="js/jquery/jquery-1.4.2.js"></script>
<script type="text/javascript" src="js/common/businesspage.js"> </script>

<script type="text/javascript" src="js/jquery/woo.js"></script>
<script type="text/javascript" src="js/jquery/component.js"></script>
<script type="text/javascript" src="js/jquery/dump.js"></script>
<script type="text/javascript" src="js/jquery/combo/yxcombo.js"></script>
<script type="text/javascript" src="js/jquery/grid/yxsgrid.js"></script>
<script type="text/javascript" src="js/jquery/grid/yxgrid.js"></script>
<script type="text/javascript" src="js/jquery/combo/yxcombogrid.js"></script>
<script type="text/javascript" src="js/jquery/combo/business/yxcombogrid-province.js"></script>
<script type="text/javascript" src="js/jquery/combo/business/yxcombogrid-customer.js"></script>
<script type="text/javascript" src="js/jquery/combo/business/yxcombogrid-linkman.js"></script>
<script type="text/javascript" src="js/jquery/combo/business/yxcombogrid-product.js"></script>
<script type="text/javascript" src="js/jquery/combo/business/yxcombogrid-licenseType.js"></script>


<script type="text/javascript" src="js/validate.js"> </script>
<script type="text/javascript" src="js/jquery/formValidator.js" charset="UTF-8"></script>
<script type="text/javascript" src="js/jquery/formValidatorRegex.js" charset="UTF-8"></script>
<script type="text/javascript" src="js/DatePicker/WdatePicker.js"> </script>

<script type="text/javascript" src="view/template/projectmanagent/order/js/sales-order.js"></script>
<script type="text/javascript" src="view/template/projectmanagent/order/js/sales-order-formvalidator.js"></script>
<script>
 function saveSales() {
	document.getElementById('form1').action = "index1.php?model=projectmanagent_order_order&action=salesAdd";
}
</script>



<!-- 附件上传开始 -->
<script type="text/javascript" src="swfupload/swfupload.js"></script>
<script type="text/javascript" src="swfupload/swfupload.queue.js"></script>
<script type="text/javascript" src="swfupload/fileprogress.js"></script>
<script type="text/javascript" src="swfupload/handlers.js"></script>
<link rel="stylesheet" type="text/css" href="swfupload/upload.css" />


</head>
<body>
<table>
	<tr>
		<td><img src="images/sys_config.gif" /> <b> 销售合同 </b></td>
	</tr>
</table>

<form action="?model=projectmanagent_order_order&action=salesAdd"
	method="post" id="form1" onsubmit="return CheckForm()"
	onkeypress="return NoSubmit(event);">
<table class='form_main_table'>
	<tr>
		<td class="form_text_left">鼎利合同号</td>
		<td class="form_text_right">
			<input type="text" class="txt" name="order[contNumber]" id="contNumber" />
			<span id="_contNumber" class="red"> [*]</span>
			<div id="contNumberTip" class="tipShortTxt"></div>
			<input type="hidden" name="order[orderId]" value="{orderId}" />
			<input type="hidden" name="order[orderCode]" value="{orderCode}" />

		</td>
		<td class="form_text_left">订单号</td>
		<td class="form_text_right">
		    <input type="text" class="readOnlyTxtNormal" readonly  name="order[temporaryNo]" id="temporaryNo" value="{orderCode}" />
		    <span id="_temporaryNo" class="red"> [*] </span></td>
	</tr>
	<tr>
		<td class="form_text_left">合同名称</td>
		<td class="form_text_right" >
			<input type="text" class="txt" name="order[contName]" id="contName" value="{orderName}" />
		 	<span id="_contName" class="red">[*]</span>
		 </td>
		 <td class="form_text_left">客户合同号</td>
		 <td class="form_text_right" colspan="3">
			<input type="text" name="order[customerContNum]" id="customerContNum" class="txt" maxlength="100" />
		</td>
	</tr>
	<tr>
		<td class="form_text_left">合同金额</td>
		<td class="form_text_right">
		    <input type="text" class="txt formatMoney" name="order[money]" id="money" maxlength="100" value="{orderMoney}" />
		     <span id="_money" class="red"> [*] </span></td>
		<td class="form_text_left">发票类型</td>
		<td class="form_text_right">
			<select class="txt" name="order[invoiceType]" id="invoiceType1">
				{invoiceType}
			</select>
		</td>
	</tr>
	<tr>
		<td class="form_text_left">计划交货日期</td>
		<td class="form_text_right">
		    <input type="text" class="txt" name="order[deliveryDate]" id="deliveryDate" onfocus="WdatePicker()" value="{deliveryDate}" />
		    <span id="_deliveryDate" class="red">
		[*] </span></td>
		<td class="form_text_left">合同负责人</td>
		<td class="form_text_right">
		   <input type="hidden" name="order[principalId]" id="principalId" value="{userId}" />
	       <input type="text" class="txt" name="order[principalName]" id="principalName" readonly value="{userName}" />
	       <input type="button" class="txt_btn_a" value="选 择" class="SmallButton"
	          onclick="loadOrgWindow('principalId','principalName')" title="选择人员" name="button" />
	       <input type="button" class="txt_btn_a" value="清 空" class="SmallButton" title="清空人员"
			  onclick="clearOrgInfo('principalId','principalName')" /> <span
			id="_money" class="red"> [*] </span></td>
	</tr>
	<tr>
		<td class="form_text_left">客户名称</td>
		<td class="form_text_right">
		  <input type="text" class="txt" id="customerName" name="order[customerName]" value="{customerName}" />
          <span id="_customerId" class="red"> [*] </span></td>
		  <input type="hidden" name="order[customerId]" id="customerId" />

		<td class="form_text_left">付款单位</td>
		<td class="form_text_right">
		   <input type="text" class="txt" id="payUnit" name="order[payUnit]" />
		   <input type="hidden" id="payUnitId" /></td>
	</tr>
	<tr>
		<td class="form_text_left">客户类型</td>
		<td class="form_text_right">
		    <select class="txt" name="order[customerType]" id="customerType">
		        {customerType}
            </select></td>
		<td class="form_text_left">客户所属省份</td>
		<td class="form_text_right">
		   <input type="text" class="txt" name="order[province]" id="provincecity" class="text" maxlength="10"
			value="{customerProvince}" />
			<input type="hidden" name="order[provinceId]" id="provinceId" /></td>
	</tr>
	<tr>

		<!-- 				<td class="form_text_left">
					客户联系人
				</td>
				<td class="form_text_right">
					<input type="text" name="sales[customerLinkman]" id="customerLinkman" onclick="reloadCombo()"
					class="txt" maxlength="100"/>
					<input type="hidden" id="customerLinkmanId"/>
				</td>
			</tr>
			<tr>
				<td class="form_text_left">
					电话
				</td>
				<td class="form_text_right">
					<input type="text" name="sales[customerTel]" id="customerTel" class="txt"
					maxlength="50" />
				</td>
				<td class="form_text_left">
					邮箱
				</td>
				<td class="form_text_right">
					<input type="text" class="txt" name="sales[customerEmail]" id="customerEmail"
					class="red" maxlength="50"/>
				</td> -->
	</tr>
	<tr>
		<td class="form_text_left">收货地址</td>
		<td class="form_text_right" colspan="3"><textarea
			name="order[address]" id="address" class="all" style="width: 100%">{address}</textarea>
		</td>
	</tr>
</table>
<table class="main_table" width="100%" id="link" cellspacing='1'
	cellpadding='0'>
	<tr>
		<td colspan="8" class="form_header"><font> 客户联系人 </font></td>
		<td align="center" width="5%">
		   <input type="hidden" id="linkNum" name="linkNum" value="1" />
		    <img src="images/verpic_open.gif" onclick="dis('mylink')" title="缩放" />
		    <img src="images/collapsed.gif" onclick="link_add('mylink','linkNum')" title="添加行" /></td>
	</tr>
</table>
<table id="mylink" width="100%" class="main_table" cellspacing='1'
	cellpadding='0'>
	<tr class="main_tr_header">
		<td style="text-align:center" width="5%">序号</td>
		<th width="20%">客户联系人</th>
		<th width="20%">电话</th>
		<th width="20%">邮件</th>
		<th width="30%">备注</th>
		<th width="5%">操作</th>
	</tr>
	<tr align="center" id="linkDetail1">
		<td width="5%">1</td>
		<td>
		  <input class="text" type="hidden" name="order[linkman][1][linkmanId]" id="linkmanId1" />
		  <input class="txt" type="text" name="order[linkman][1][linkman]" id="linkman1" onclick="reloadLinkman('linkman1');" />
		</td>
		<td align="center">
		  <input class="txt" type="text" name="order[linkman][1][telephone]" id="telephone1" /></td>
		<td align="center">
		  <input class="txt" type="text" name="order[linkman][1][Email]" id="Email1" /></td>
		<td><input class="txtlong" type="text"
			name="order[linkman][1][remark]" id="remark1" /></td>
		<td width="5%"><img src="images/closeDiv.gif"
			onclick="mydel(this,'mylink')" title="删除行" /></td>
	</tr>
</table>
<table class="main_table" id="equ" width="100%">
	<tr>
		<td colspan="8" class="form_header"><font> 产品清单 </font></td>
		<td align="center" width="5%">
		   <input type="hidden" id="EquNum" value="{EquNum}" />
		   <img src="images/verpic_open.gif" onclick="dis('myequ')" title="缩放" />
		   <img src="images/collapsed.gif" onclick="soft_add('myequ','EquNum')" title="添加行" /></td>
	</tr>
</table>
<table id="myequ" width="100%" class="form_main_table">
	<tr class="main_tr_header">
		<th width="5%">序号</th>
		<th width="9%">产品线</th>
		<th width="10%">产品编号</th>
		<th width="16%">产品名称</th>
		<th width="9%">型号/版本</th>
		<th width="8%">数量</th>
		<th width="8%">单价</th>
		<th width="8%">金额</th>
		<th width="10%">计划交货日期</th>
		<th width="8%">保修期</th>
		<th width="4%">合同内</th>
		<th width="5%">操作</th>
	</tr>
	{orderequ}
</table>
<table class="main_table" width="100%" cellspacing='1' cellpadding='0'>
	<tr>
		<td colspan="8" class="form_header"><font> 加密信息 </font></td>
		<td align="center" width="5%"><input type="hidden"
			id="licenseNum" value="1" /> <img src="images/verpic_open.gif"
			onclick="dis('mylicense')" title="缩放" /> <img
			src="images/collapsed.gif"
			onclick="license_add('mylicense','licenseNum')" title="添加行" /></td>
	</tr>
</table>
<table width="100%" id="mylicense" class="form_main_table">
	<tr class="main_tr_header">
		<th width="5%">序号</th>
		<th width="10%">产品线</th>
		<th width="10%">软件狗类型</th>
		<th width="10%">数量</th>
		<th width="12%">License</th>
		<th width="16%">License树</th>
		<th width="8%">有效期</th>
		<th>备注</th>
		<th width="4%">合同内</th>
		<th width="5%">操作</th>
	</tr>
	<tr align="center">
		<td>1</td>
		<td width="9%"><select class="txtshort"
			name="order[licenselist][1][productLine]" id="lProductLine1">
		</select></td>
		<td><select class="txtshort"
			name="order[licenselist][1][softdogType]" id="softdogType1">
			<option value="HASP">HASP</option>
		</select></td>
		<td><input class="txtshort" type="text"
			name="order[licenselist][1][amount]" id="softdogAmount1" size="10" />
		</td>
		<td width="10%" onMouseOver="this.style.cursor='pointer';"><input
			type="hidden" name="order[licenselist][1][licenseNodeId]"
			id="licenseNodeId1" /> <input class="txtmiddle" type="text"
			name="order[licenselist][1][licenseType]" id="licenseType1" /> <input
			type="hidden" id="licenseinput1"
			name="order[licenselist][1][licenseTypeIds]" /></td>
		<td><input type="hidden" id="licenseNodeId1"
			name="order[licenselist][1][nodeId]" /> <textarea
			id="licenseNodeName1" name="order[licenselist][1][nodeName]"
			onmouseover="this.style.cursor='pointer'" title="选择加密信息"
			onclick="openDia(1)" rows="3" cols="20"></textarea></td>
		<td width="8%"><select class="txtshort"
			name="order[licenselist][1][validity]" id="validity1">
			<option value="半年">半年</option>
			<option value="一年">一年</option>
			<option value="两年">两年</option>
		</select></td>
		<td><input class="txt" type="text"
			name="order[licenselist][1][remark]" id="licenseRemark1" size="25"
			maxlength="100" /></td>
		<td width="4%"><input type="checkbox"
			name="order[licenselist][1][isSell]" id="licenseisSell1"
			checked="checked" /></td>
		<td width="5%"><img src="images/closeDiv.gif"
			onclick="mydel(this,'mylicense')" title="删除行" /></td>
	</tr>
</table>
<table class="main_table" id="pre" width="100%" cellspacing='1'
	cellpadding='0'>
	<tr>
		<td colspan="8" class="form_header"><font> 自定义清单 </font></td>
		<td align="center" width="5%"><input type="hidden" id="PreNum"
			name="PreNum" value="{PreNum}" /> <img src="images/verpic_open.gif"
			onclick="dis('mycustom')" title="缩放" /> <img
			src="images/collapsed.gif" onclick="pre_add('mycustom','PreNum')"
			title="添加行" /></td>
	</tr>
</table>
<table id="mycustom" width="100%" class="form_main_table">
	<tr class="main_tr_header">
		<th width="5%">序号</th>
		<th width="10%">产品线</th>
		<th>产品编号</th>
		<td style="text-align:center">产品名称</td>
		<td width="8%" style="text-align:center">产品型号</td>
		<td width="8%" style="text-align:center">数量</td>
		<td width="8%" style="text-align:center">单价</td>
		<td width="8%" style="text-align:center">金额</td>
		<td style="text-align:center">计划交货日期</td>
		<td width="15%" style="text-align:center">备注</td>
		<td width="4%" style="text-align:center">合同内</td>
		<td width="5%" style="text-align:center">操作</td>
	</tr>
	  {customizelist}
</table>
<table class="main_table" width="100%" id="inv" cellspacing='1'
	cellpadding='0'>
	<tr>
		<td colspan="8" class="form_header"><font> 开票计划 </font></td>
		<td align="center" width="5%"><input type="hidden" id="InvNum"
			name="InvNum" value="1" /> <img src="images/verpic_open.gif"
			onclick="dis('myinv')" title="缩放" /> <img src="images/collapsed.gif"
			onclick="inv_add('myinv','InvNum')" title="添加行" /></td>
	</tr>
</table>
<table width="100%" id="myinv" class="form_main_table">
	<tr class="main_tr_header">
		<td width="5%" style="text-align:center">序号</td>
		<td width="10%" style="text-align:center">开票金额</td>
		<td width="10%" style="text-align:center">其中软件金额</td>
		<td width="10%" style="text-align:center">开票类型</td>
		<th >开票日期</th>
		<th >开票内容</th>
		<td width="5%" style="text-align:center">操作</td>
	</tr>
	{invoice}
</table>
<table class="main_table" width="100%" id="pay" cellspacing='1'
	cellpadding='0'>
	<tr>
		<td colspan="8" class="form_header"><font> 收款计划 </font></td>
		<td align="center" width="5%"><input type="hidden" id="PayNum"
			name="PayNum" value="{PayNum}" /> <img src="images/verpic_open.gif"
			onclick="dis('mypay')" title="缩放" /> <img src="images/collapsed.gif"
			onclick="pay_add('mypay','PayNum')" title="添加行" /></td>
	</tr>
</table>
<table id="mypay" width="100%" class="main_table" cellspacing='1'
	cellpadding='0'>
	<tr class="main_tr_header">
		<th>序号</th>
		<th >收款金额</th>
		<th >收款日期</th>
		<th >收款方式</th>
		<th >收款条件</th>
		<th width="5%">操作</th>
	</tr>
	{receiptplan}
</table>
<table class="main_table" width="100%" id="" cellspacing='1'
	cellpadding='0'>
	<tr>
		<td colspan="8" class="form_header"><font> 培训计划 </font></td>
		<td align="center" width="5%"><input type="hidden" id="TraNumber"
			name="TraNumber" value="{TraNumber}" /> <img src="images/verpic_open.gif"
			onclick="dis('mytra')" title="缩放" /> <img src="images/collapsed.gif"
			onclick="train_add('mytra','TraNumber')" title="添加行" /></td>
	</tr>
</table>
<table id="mytra" width="100%" class="form_main_table" cellspacing='1'
	cellpadding='0'>
	<tr class="main_tr_header">
		<td width="5%" style="text-align:center">序号</td>
		<td width="8%" style="text-align:center">培训开始时间</td>
		<td width="8%" style="text-align:center">培训结束时间</td>
		<td width="8%" style="text-align:center">参与人数</td>
		<td width="18%" style="text-align:center">培训地点</td>
		<td style="text-align:center">培训内容</td>
		<td width="20%" style="text-align:center">培训工程师要求</td>
		<td width="5%" style="text-align:center">操作</td>
	</tr>
	{trainingplan}
</table>
<table class='form_main_table' cellspacing='1' cellpadding='0'>
	<tr>
		<td colspan="8" class="form_header"><font> 保修条款 </font> <img
			src="images/verpic_open.gif" onclick="dis('gua')" title="缩放" /></td>
	</tr>
	<tr id="gua">
		<td colspan="4"><textarea name="order[warrantyClause]"
			id="warrantyClause" rows="5" style="width: 100%"></textarea></td>
	</tr>
	<tr>
		<td colspan="8" class="form_header"><font> 售后要求 </font> <img
			src="images/verpic_open.gif" onclick="dis('aft')" title="缩放" /></td>
	</tr>
	<tr id="aft">
		<td colspan="4"><textarea name="order[afterService]"
			id="afterService" rows="5" style="width: 100%"></textarea></td>
	</tr>
	<tr>
		<td class="" colspan="4">合同附件 &nbsp;
		<div class="upload">
		<div class="upload" id="fsUploadProgress"></div>
		<div class="upload"><span id="swfupload"> </span> <input
			id="btnCancel" type="button" value="中止上传"
			onclick="cancelQueue(uploadfile);" disabled="disabled" /> <br />
		</div>
		<div id="uploadfileList" class="upload"></div>
		</div>
		</td>
	</tr>
	<tr>
		<td class="main_foot_wraper" colspan="4">签约状态 : &nbsp; <input
			type="radio" name="order[signStatus]" value="0" checked /> 未签约 <input
			type="radio" name="order[signStatus]" value="1" /> 已签约 <input
			type="radio" name="order[signStatus]" value="2" /> 已拿到纸质合同 <input
			type="radio" name="order[signStatus]" value="3" /> 已提交纸质合同</td>
	</tr>
	<tr>
		<td class="main_foot_wraper" colspan="4">付款条件 : <input
			type="radio" name="order[shipCondition]" value="1" checked /> 款到发货 <input
			type="radio" name="order[shipCondition]" value="2" /> 货到付款</td>
	</tr>
	<tr>
		<td class="main_foot_wraper" colspan="4">提交方式 : <input
			type="radio" name="order[startType]" value="1" checked /> 通知启动 <input
			type="radio" name="order[startType]" value="2" /> 审批后直接启动</td>
	</tr>
	<tr>
		<td class="txt_btn" colspan="4">
		   <input type="hidden" name="order[version]" id="version" value="1" />
		  <!-- <input class="txt_btn_a" type="submit" value="提交审批" />  -->
		   <input type="submit" class="txt_btn_a" value=" 保 存 " onclick="saveSales();" />
		   <input type="button"class="txt_btn_a" value="  返 回 " onclick="history.go(-1)" /></td>
	</tr>
</table>
</form>
</body>
</html>
